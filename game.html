<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Puzzle Game ❤️</title>
    <style>
        body {
            margin: 0;
            font-family: "Segoe UI", sans-serif;
            background: #ffe6f2;
            text-align: center;
            animation: fadeIn 2s ease-in-out;
        }

        h1 {
            margin-top: 40px;
            color: #b30059;
            font-size: 2.4rem;
        }

        #puzzle-container {
            width: 500px;
            height: 400px;
            margin: 40px auto;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 4px;
        }

        .tile {
            width: 100%;
            height: 100%;
            background-image: url("IMG_6785.jpg");
            background-size: 500px 400px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        #message {
            margin-top: 30px;
            font-size: 1.6rem;
            color: #b30059;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        /* Gift button (hidden at first) */
        #giftButton {
            display: none;
            margin-top: 25px;
            font-size: 1.3rem;
            color: white;
            background: #b30059;
            padding: 12px 25px;
            border-radius: 10px;
            text-decoration: none;
            animation: bounceGlow 2s infinite, fadeInOut 4s infinite;
            position: relative;
        }

        /* Sparkles */
        #giftButton::after {
            content: "✨";
            position: absolute;
            top: -15px;
            right: -15px;
            font-size: 1.5rem;
            opacity: 0;
            animation: sparkle 1.5s infinite;
        }

        @keyframes sparkle {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1.3); }
            100% { opacity: 0; transform: scale(0.5); }
        }

        @keyframes bounceGlow {
            0%, 100% { transform: translateY(0); box-shadow: 0 0 10px #ff66a3; }
            50% { transform: translateY(-10px); box-shadow: 0 0 20px #ff99c2; }
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        a.back {
            display: block;
            margin-top: 40px;
            font-size: 1.1rem;
            color: #b30059;
            text-decoration: none;
        }

        a.back:hover {
            text-decoration: underline;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>

<h1>Solve the Puzzle ❤️</h1>

<div id="puzzle-container"></div>

<div id="message">CONGRATS_PLACEHOLDER</div>

<a id="giftButton" href="gift.html">OPEN FOR YOUR GIFT</a>

<a class="back" href="index.html">⬅ Back to Home</a>

<script>
const rows = 4;
const cols = 5;
const container = document.getElementById("puzzle-container");
const message = document.getElementById("message");
const giftButton = document.getElementById("giftButton");

let tiles = [];
let solved = false;

// Create 20 tiles
for (let r = 0; r < rows; r++) {
    for (let c = 0; c < cols; c++) {
        const tile = document.createElement("div");
        tile.classList.add("tile");

        tile.style.backgroundPosition = `-${c * 100}px -${r * 100}px`;

        let rotation = [0, 90, 180, 270][Math.floor(Math.random() * 4)];
        tile.dataset.rotation = rotation;
        tile.style.transform = `rotate(${rotation}deg)`;

        tile.addEventListener("click", () => {
            if (solved) return;

            rotation = (rotation + 90) % 360;
            tile.dataset.rotation = rotation;
            tile.style.transform = `rotate(${rotation}deg)`;

            checkSolved();
        });

        container.appendChild(tile);
        tiles.push(tile);
    }
}

function checkSolved() {
    const allCorrect = tiles.every(tile => tile.dataset.rotation == 0);

    if (allCorrect) {
        solved = true;
        message.style.opacity = 1;
        giftButton.style.display = "inline-block";
    }
}
</script>

</body>
</html>
